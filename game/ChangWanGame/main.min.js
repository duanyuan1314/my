var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},BaseMovieClip=function(e){function t(t,i,n,a,s,r){var o=e.call(this)||this;o.nowPlayName=n,o.nowFrameRate=a,o.nowPlayTimes=s,o.resData=t,0==r?i.addChild(o):i.addChildAt(o,r);var h=RES.getRes(t+"_eft_json"),l=RES.getRes(t+"_eft_png");if(null!=h&&null!=l)o.mcFactory=new egret.MovieClipDataFactory(h,l),o.PlayAnimation(o.nowPlayName,o.nowFrameRate,o.nowPlayTimes);else{var c=[t+"_eft_json",t+"_eft_png"];EventCenter.instance.AddListener(GameEventTypeDefine.LoadOneGroupComplete,o.LoadComplete,o),o.baseload=LoadManager.instance.LoadGroup(c),o.baseload.StartLoad()}return o}return __extends(t,e),t.prototype.LoadComplete=function(e){if(this.baseload==e){var t=RES.getRes(this.resData+"_eft_json"),i=RES.getRes(this.resData+"_eft_png");this.mcFactory=new egret.MovieClipDataFactory(t,i),this.PlayAnimation(this.nowPlayName,this.nowFrameRate,this.nowPlayTimes),EventCenter.instance.RemoveListener(GameEventTypeDefine.LoadOneGroupComplete,this.LoadComplete,this)}},t.prototype.PlayAnimation=function(e,t,i){this.nowPlayName=e,this.nowFrameRate=t,this.nowPlayTimes=i,null!=this.mcFactory&&(null!=this.animation&&(this.animation.stop(),this.removeChild(this.animation)),this.animation=new egret.MovieClip(this.mcFactory.generateMovieClipData(e)),this.addChild(this.animation),this.animation.frameRate=t,this.animation.gotoAndPlay(1,i))},t.prototype.Destroy=function(){null!=this.mcFactory&&this.mcFactory.clearCache(),EventCenter.instance.RemoveListener(GameEventTypeDefine.LoadOneGroupComplete,this.LoadComplete,this),this.parent&&this.parent.contains(this)&&this.parent.removeChild(this),this.baseload=null},t}(egret.DisplayObjectContainer);__reflect(BaseMovieClip.prototype,"BaseMovieClip");var BasePanel=function(e){function t(){var t=e.call(this)||this;return t.initPanel=!1,t.created=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.created=!0},t.prototype.AddRoleResPanel=function(e){},t.prototype.Create=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null)},t.prototype.Destroy=function(){},t.prototype.BtnClose=function(e){e.stopImmediatePropagation(),SceneManager.instance.RemovePanel(this.panelId),SceneManager.instance.RemoveTopPanel(this.panelId)},t}(eui.Component);__reflect(BasePanel.prototype,"BasePanel");var SceneManager=function(){function e(e,t,i){this.nickName="",this.tipsIndex=new Array,this.gameLayer=e,this.guiLayer=t,this.topLayer=i,this.top=new TopPanel,this.guiLayer.addChild(this.top),this.top.y=0,this.top.visible=!1,this.panelPool=new Array,this.panelTopPool=new Array}return e.prototype.ChangeScene=function(e){switch(0==this.top.visible&&(this.top.visible=!0),this.ClearAllPanel(),e){case SceneId.LoginScene:this.AddPanel(PanelIdDefine.LoginPanel);break;case SceneId.MainScene:this.AddPanel(PanelIdDefine.MainPanel);break;case SceneId.OverScene:this.AddPanel(PanelIdDefine.GameOverPanel)}this.lastSceneId=e},e.prototype.AddPanel=function(e){var t=this.GetPanelById(e);if(null==t){switch(e){case PanelIdDefine.LoginPanel:t=new LoginPanel;break;case PanelIdDefine.MainPanel:t=new MainPanel;break;case PanelIdDefine.GameOverPanel:var i=location.href,n=i.indexOf("http://game.koko360.com");n>-1&&NetManager.instance.SendStr("stepnum="+MainPanel.cengNum+"&&ordernum="+DataPool.instance.getstar.ordernum,"http://game.koko360.com/game/crazy/gameover"),t=new GameOverPanel;break;case PanelIdDefine.ReadyGoPanel:t=new ReadyGoPanel}this.panelPool.push(t)}return null!=t&&(this.gameLayer.addChild(t),t.height=Main.stageHeight),t},e.prototype.RemovePanel=function(e){var t=this.GetPanelById(e);if(null!=t&&this.gameLayer.contains(t)){this.gameLayer.removeChild(t),t.Destroy();for(var i=this.panelPool.length-1;i>=0;i--)if(this.panelPool[i].panelId==e){this.panelPool.splice(i,1);break}}},e.prototype.AddTopPanel=function(e){var t=this.GetPanelById(e);if(null==t){switch(e){case PanelIdDefine.StartMainPanel:t=new StartMainPanel;break;case PanelIdDefine.RulePanel:t=new RulePanel;break;case PanelIdDefine.TurntablePanel:t=new TurntablePanel;break;case PanelIdDefine.HeChengPanel:t=new HeChengPanel;break;case PanelIdDefine.FuHuoPanel:var i=location.href,n=i.indexOf("http://game.koko360.com");n>-1&&NetManager.instance.SendStr("","http://game.koko360.com/game/crazy/needledou"),t=new FuHuoPanel}this.panelTopPool.push(t)}return null!=t&&(this.topLayer.addChild(t),t.height=Main.stageHeight),t},e.prototype.RemoveTopPanel=function(e){var t=this.GetTopPanelById(e);if(null!=t&&this.topLayer.contains(t)){this.topLayer.removeChild(t),t.Destroy();for(var i=this.panelTopPool.length-1;i>=0;i--)if(this.panelTopPool[i].panelId==e){this.panelTopPool.splice(i,1);break}}},e.prototype.GetTopPanelById=function(e){for(var t=this.panelTopPool.length-1;t>=0;t--)if(this.panelTopPool[t].panelId==e)return this.panelTopPool[t];return null},e.prototype.RemovePanelView=function(e){this.RemovePanel(e.panelId)},e.prototype.CreateTipsPanel=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);for(var n=0,a=0;a<this.tipsIndex.length;a++)if(!this.tipsIndex[a]){n=a;break}this.tipsIndex[n]=!0;var s=new TipsPanel;s.Create(e),s.SetIndex(n),this.topLayer.addChild(s)},e.prototype.RemoveTipsPanel=function(e){this.tipsIndex[e.index]=!1,this.topLayer.contains(e)&&this.topLayer.removeChild(e)},e.prototype.CreateLoginTipsPanel=function(e,t,i,n){var a=new LoginTipsPanel;a.Create(e,t,i,n),this.topLayer.addChild(a)},e.prototype.RemoveLoginTipsPanel=function(e){this.topLayer.contains(e)&&this.topLayer.removeChild(e)},e.prototype.GetPanelById=function(e){for(var t=this.panelPool.length-1;t>=0;t--)if(this.panelPool[t].panelId==e)return this.panelPool[t];return null},e.prototype.ClearAllPanel=function(){switch(this.lastSceneId){case SceneId.LoginScene:for(var e=this.panelPool.length-1;e>=0;e--)this.panelPool[e].Destroy(),this.panelPool.splice(e,1);this.gameLayer.removeChildren();for(var e=this.panelTopPool.length-1;e>=0;e--)this.panelTopPool[e].Destroy(),this.panelTopPool.splice(e,1);this.topLayer.removeChildren();break;case SceneId.MainScene:for(var e=this.panelPool.length-1;e>=0;e--)this.panelPool[e].Destroy(),this.panelPool.splice(e,1);this.gameLayer.removeChildren();for(var e=this.panelTopPool.length-1;e>=0;e--)this.panelTopPool[e].Destroy(),this.panelTopPool.splice(e,1);this.topLayer.removeChildren();break;case SceneId.OverScene:for(var e=this.panelPool.length-1;e>=0;e--)this.panelPool[e].Destroy(),this.panelPool.splice(e,1);this.gameLayer.removeChildren();for(var e=this.panelTopPool.length-1;e>=0;e--)this.panelTopPool[e].Destroy(),this.panelTopPool.splice(e,1);this.topLayer.removeChildren()}},e}();__reflect(SceneManager.prototype,"SceneManager");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var NormalEffect=function(e){function t(t,i,n,a,s,r){var o=e.call(this,t,i,"eft",s,r,0)||this;return o.pos=new egret.Point,o.x=n,o.y=a,FrameCenter.instance.AddListener(o.RunLogic,o),o}return __extends(t,e),t.prototype.RunLogic=function(){null!=this.animation&&this.animation.currentFrame==this.animation.totalFrames&&this.Destroy()},t.prototype.Destroy=function(){e.prototype.Destroy.call(this),FrameCenter.instance.RemoveListener(this.RunLogic,this)},t}(BaseMovieClip);__reflect(NormalEffect.prototype,"NormalEffect");var NormalSound=function(){function e(e,t){this.playEnd=!1,this.lastSoundName="",this.PlaySound(e,t)}return e.prototype.onSoundComplete=function(e){this.playEnd=!0},e.prototype.GetVolume=function(){return this.channel?this.channel.volume:void 0},e.prototype.PlaySound=function(e,t){this.lastSoundName==e?this.playEnd&&(this.channel&&this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.sound=RES.getRes(e+"_mp3"),this.channel=this.sound.play(0,t),this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)):(this.channel&&this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.sound=RES.getRes(e+"_mp3"),this.channel=this.sound.play(0,t),this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)),this.lastSoundName=e},e.prototype.Play=function(e){this.channel&&(this.channel=this.sound.play(0,e))},e.prototype.SetVolume=function(e){this.channel&&(this.channel.volume=e)},e.prototype.Stop=function(){this.channel&&this.channel.stop()},e}();__reflect(NormalSound.prototype,"NormalSound");var TimeLine=function(){function e(){this.list=new TimeLineArray,this.nowTime=0}return e.prototype.Update=function(){this.nowTime=egret.getTimer();for(var e=this.list.timeList.length-1;e>=0;e--)this.target=this.list.targetObj[e],this.param=this.list.pram[e],this.time=this.list.timeList[e],this.nowFun=this.list.list[e],this.time<=this.nowTime&&(this.list.list.splice(e,1),this.list.targetObj.splice(e,1),this.list.timeList.splice(e,1),this.list.pram.splice(e,1),this.nowFun.call(this.target,this.param))},e.prototype.Clear=function(){this.list.Clear()},e.prototype.RemoveTimeEvent=function(e,t,i){void 0===i&&(i=!1),i?this.list.RemoveAll(e,t):this.list.RemoveOne(e,t)},e.prototype.AddTimeEvent=function(e,t,i,n){this.list.Add(e,t,i,n+egret.getTimer())},e}();__reflect(TimeLine.prototype,"TimeLine");var TimeLineArray=function(){function e(){this.list=new Array,this.pram=new Array,this.targetObj=new Array,this.timeList=new Array}return e.prototype.Add=function(e,t,i,n){this.list.push(e),this.targetObj.push(t),this.pram.push(i),this.timeList.push(n)},e.prototype.RemoveAll=function(e,t){for(var i=this.list.length-1;i>=0;i--)this.list[i]==e&&this.targetObj[i]==t&&(this.list.splice(i,1),this.targetObj.splice(i,1),this.timeList.splice(i,1),null!=this.pram[i]&&this.pram[i]instanceof BaseMovieClip&&this.pram[i].Destroy(),this.pram.splice(i,1))},e.prototype.RemoveOne=function(e,t){for(var i=this.list.length-1;i>=0;i--)if(this.list[i]==e&&this.targetObj[i]==t){this.list.splice(i,1),this.targetObj.splice(i,1),this.timeList.splice(i,1),null!=this.pram[i]&&this.pram[i]instanceof BaseMovieClip&&this.pram[i].Destroy(),this.pram.splice(i,1);break}},e.prototype.Clear=function(){for(;this.list.length>0;)this.list.pop();for(;this.targetObj.length>0;)this.targetObj.pop();for(;this.timeList.length>0;)this.timeList.pop();for(;this.pram.length>0;)this.pram.pop()},e}();__reflect(TimeLineArray.prototype,"TimeLineArray");var DataPool=function(){function e(){this.zimubili=50,this.breakdongbili=10,this.jifen=0,this.needjifen=0,this.getUser=new GetUserVo,this.getstar=new GetStartVo,this.getHeidong=new GetHeiDongVo,this.getHecheng=new GetHeChengVo,this.getGameOver=new GetGameOverVo}return e.prototype.AddData=function(e){this.GetData(e)},e.prototype.GetData=function(e){switch(parseInt(e.code)){case-1:SceneManager.instance.CreateLoginTipsPanel("提示","您还未登录，请先登陆！","前往登录",2056667);break;case 0:break;case 1:null!=e.data&&(null!=e.data.jifen&&(this.jifen=1*e.data.jifen),this.getUser.Update(e.data));break;case 2:null!=e&&(this.zimubili=e.gameset.zimu,this.breakdongbili=e.gameset.blackdong,this.getstar.Update(e));break;case 3:null!=e.data&&this.getHeidong.Update(e.data);break;case 4:null!=e.data&&this.getHecheng.Update(e.data);break;case 5:null!=e.jifen&&(this.jifen=e.jifen);break;case 6:null!=e.jifen&&(this.jifen=e.jifen);break;case 7:null!=e.needjifen&&(this.needjifen=e.needjifen);break;case 8:null!=e&&this.getGameOver.Update(e)}EventCenter.instance.CallEvent(parseInt(e.code),this)},e}();__reflect(DataPool.prototype,"DataPool");var ObjectVo=function(){function e(){this.list=new Array,this.index=0}return e.prototype.GetObject=function(){return this.list.length>0?this.list.pop():this.NewObject()},e.prototype.PushObject=function(e){this.list.push(e)},e.prototype.NewObject=function(){return this.index++,null},e}();__reflect(ObjectVo.prototype,"ObjectVo");var BaseLoadPool=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.NewObject=function(){return new BaseLoad},t}(ObjectVo);__reflect(BaseLoadPool.prototype,"BaseLoadPool");var GetUserVo=function(){function e(){this.id=0,this.name=0,this.jifen=0,this.phone="",this.runaddress=""}return e.prototype.Update=function(e){null!=e.id&&(this.id=parseInt(e.id)),null!=e.name&&(this.name=parseInt(e.name)),null!=e.jifen&&(this.jifen=1*e.jifen),null!=e.phone&&(this.phone=e.phone),null!=e.runaddress&&(this.id=e.runaddress)},e}();__reflect(GetUserVo.prototype,"GetUserVo");var GetStartVo=function(){function e(){this.tools=new Array,this.gradeid=0,this.blackdong=0,this.zimu=50}return e.prototype.Update=function(e){null!=e.ordernum&&(this.ordernum=e.ordernum),null!=e.tools&&(this.tools=e.tools),null!=e.gameset.gradeid&&(this.gradeid=e.gameset.gradeid),null!=e.gameset.wgailv&&(this.blackdong=e.gameset.blackdong),null!=e.gameset.fly&&(this.zimu=e.gameset.zimu)},e}();__reflect(GetStartVo.prototype,"GetStartVo");var GetHeiDongVo=function(){function e(){this.result=1}return e.prototype.Update=function(e){if(null!=e.result)switch(e.result){case 1:this.result=2;break;case 2:this.result=3;break;case 3:this.result=6;break;case 4:this.result=5;break;case 5:var t=Math.round(100*Math.random());50>t?this.result=1:this.result=4}},e}();__reflect(GetHeiDongVo.prototype,"GetHeiDongVo");var GetHeChengVo=function(){function e(){}return e.prototype.Update=function(e){null!=e.run&&(this.run=e.run,this.address=e.address,this.hash=e.hash,this.high=e.high)},e}();__reflect(GetHeChengVo.prototype,"GetHeChengVo");var GetGameOverVo=function(){function e(){}return e.prototype.Update=function(e){this.address=e.address,this.count=e.count,this.hash=e.hash,this.high=e.high,this.rank=e.rank,this.run=e.run},e}();__reflect(GetGameOverVo.prototype,"GetGameOverVo");var ObjectPool=function(){function e(){this.dicArray=new Array,this.dicArray.BaseLoadPool=new BaseLoadPool}return e.prototype.GetBaseLoad=function(){var e=this.dicArray.BaseLoadPool;return e.GetObject()},e.prototype.PushBaseLoad=function(e){var t=this.dicArray.BaseLoadPool;t.PushObject(e)},e}();__reflect(ObjectPool.prototype,"ObjectPool");var GameEventTypeDefine=function(){function e(){}return e}();GameEventTypeDefine.LoadGroupComplete=1e5,GameEventTypeDefine.LoadOneGroupComplete=100002,GameEventTypeDefine.LoadProgress=100003,GameEventTypeDefine.LOGING=-1,GameEventTypeDefine.LOST=0,GameEventTypeDefine.GETUSER=1,GameEventTypeDefine.GETSTART=2,GameEventTypeDefine.HEIDONG=3,GameEventTypeDefine.ENOUTH=4,GameEventTypeDefine.BUYTOOL=5,GameEventTypeDefine.RELIVe=6,GameEventTypeDefine.NEEDJIFEN=7,GameEventTypeDefine.GAMEOVER=8,__reflect(GameEventTypeDefine.prototype,"GameEventTypeDefine");var PanelIdDefine=function(){function e(){}return e}();PanelIdDefine.LoginPanel=1,PanelIdDefine.StartMainPanel=2,PanelIdDefine.MainPanel=3,PanelIdDefine.RulePanel=4,PanelIdDefine.TurntablePanel=5,PanelIdDefine.HeChengPanel=6,PanelIdDefine.GameOverPanel=7,PanelIdDefine.FuHuoPanel=8,PanelIdDefine.ReadyGoPanel=9,__reflect(PanelIdDefine.prototype,"PanelIdDefine");var PlayerState=function(){function e(){}return e}();PlayerState.ZUO=1,PlayerState.YOU=2,PlayerState.STAND=3,PlayerState.SI=4,PlayerState.TIAO=5,PlayerState.FLY=6,PlayerState.WUDI=7,PlayerState.DING=7,PlayerState.DINGZI=10,PlayerState.SHIJIE=11,PlayerState.CSDZUO=12,PlayerState.CSDYOU=13,PlayerState.TANHUANG=14,PlayerState.TAIJIE=15,__reflect(PlayerState.prototype,"PlayerState");var SceneId=function(){function e(){}return e}();SceneId.LoginScene=1,SceneId.MainScene=2,SceneId.OverScene=3,__reflect(SceneId.prototype,"SceneId");var DelegateFunctionArray=function(){function e(){this.list=new Array,this.targetObj=new Array}return e.prototype.Add=function(e,t){for(var i=0,n=this.list.length;n>i;i++)if(this.list[i]==e&&this.targetObj[i]==t)return;this.targetObj.push(t),this.list.push(e)},e.prototype.Contain=function(e,t){for(var i=0,n=this.list.length;n>i;i++)if(this.list[i]==e&&this.targetObj[i]==t)return i;return-1},e.prototype.Remove=function(e,t){for(var i=0,n=this.list.length;n>i;i++)if(this.list[i]==e&&this.targetObj[i]==t){this.list.splice(i,1),this.targetObj.splice(i,1);break}},e.prototype.Clear=function(){for(;this.list.length>0;)this.list.pop();for(;this.targetObj.length>0;)this.targetObj.pop()},e}();__reflect(DelegateFunctionArray.prototype,"DelegateFunctionArray");var DictionaryArray=function(){function e(){this.dfArray=new Array}return e.prototype.Clear=function(){for(;this.dfArray.length>0;)this.dfArray.pop()},e.prototype.Add=function(e,t,i){var n,a=this.ContainId(e);-1!=a?n=this.dfArray[a]:(n=new DelegateFunctionArray,n.eventId=e,this.dfArray.push(n)),n.Add(t,i)},e.prototype.ContainId=function(e){for(var t=this.dfArray.length,i=0;t>i;i++){var n=this.dfArray[i];if(n.eventId==e)return i}return-1},e.prototype.Remove=function(e,t,i){var n=this.ContainId(e);if(-1!=n){var a=this.dfArray[n];a.Remove(t,i)}},e.prototype.GetFunctions=function(e){var t=this.ContainId(e);return-1!=t?this.dfArray[t]:null},e}();__reflect(DictionaryArray.prototype,"DictionaryArray");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=633,this.textField.width=750,this.textField.height=100,this.textField.textAlign="center",this.rect=new eui.Rect,this.addChildAt(this.rect,0),this.rect.x=0,this.rect.y=0,this.rect.width=750,this.rect.height=Main.stageHeight,this.rect.alpha=1,this.progress=new Progress(350,20,10,8352345,2367513,15033856,16756224),this.addChild(this.progress),this.progress.x=200,this.progress.y=593,this.rect1=new eui.Rect,this.addChild(this.rect1),this.rect1.x=150,this.rect1.y=493,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},t.prototype.onAddToStage=function(e){this.load()},t.prototype.load=function(){this.loader=new egret.URLLoader,this.loader.once(egret.Event.COMPLETE,this.complete,this),this.loader.dataFormat=egret.URLLoaderDataFormat.TEXTURE;var e=new egret.URLRequest("resource/assets/UI/public/loading_eft.png");this.loader.load(e),this.loader1=new egret.URLLoader,this.loader1.once(egret.Event.COMPLETE,this.complete,this),this.loader1.dataFormat=egret.URLLoaderDataFormat.TEXT;var e=new egret.URLRequest("resource/assets/UI/public/loading_eft.json");this.loader1.load(e)},t.prototype.complete=function(e){this._mcTexture=this.loader.data,this._mcData=JSON.parse(this.loader1.data);var t=new egret.MovieClipDataFactory(this._mcData,this._mcTexture);this.chunli=new egret.MovieClip(t.generateMovieClipData("eft")),this.rect1.addChild(this.chunli),this.chunli.frameRate=24,this.chunli.gotoAndPlay(0,-1)},t.prototype.setProgress=function(e,t){this.textField.text="拼命加载中...",this.progress.update(e/t),this.rect1.x=150+Math.floor(e/t*350)},t.prototype.removeText=function(){this.removeChild(this.textField),this.removeChild(this.rect),this.removeChild(this.rect1),this.removeChild(this.progress)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var i=e.call(this)||this;return i.lastTime=0,i.isThemeLoadEnd=!1,i.isResourceLoadEnd=!1,t.instance=i,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(t,e),t.prototype.onAddToStage=function(e){this.createChildren()},t.prototype.createChildren=function(){var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.stage.addEventListener(egret.Event.RESIZE,this.updateBottomControlsPos,this),this.stage.addEventListener(egret.Event.ACTIVATE,this.activate,this),this.stage.addEventListener(egret.Event.DEACTIVATE,this.deactivate,this)},t.prototype.updateBottomControlsPos=function(){t.stageHeight=this.stage.stageHeight},t.prototype.activate=function(e){},t.prototype.deactivate=function(e){},t.prototype.onConfigComplete=function(e){var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){this.Init(),this.addEventListener(egret.Event.ENTER_FRAME,this.OnFrame,this)},t.prototype.OnFrame=function(e){t.deltaTime=egret.getTimer()/1e3-this.lastTime,this.lastTime=egret.getTimer()/1e3,FrameCenter.instance.CallEvent(),TimeLine.instance.Update()},t.prototype.Init=function(){if(egret.Capabilities.isMobile){this.stage.orientation=egret.OrientationMode.AUTO;var e=egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE?egret.StageScaleMode.FIXED_WIDTH:egret.StageScaleMode.SHOW_ALL;this.stage.scaleMode=e}LoadManager.instance=new LoadManager(this),LoadManager.instance.InitLoad(),this.lastTime=egret.getTimer()/1e3,AudioManager.instance=new AudioManager,NetManager.instance=new NetManager,ObjectPool.instance=new ObjectPool,EventCenter.instance=new EventCenter,DataManager.instance=new DataManager,FrameCenter.instance=new FrameCenter,DataPool.instance=new DataPool,TimeLine.instance=new TimeLine;var t=new egret.DisplayObjectContainer;this.addChild(t);var i=new egret.DisplayObjectContainer;this.addChild(i);var n=new egret.DisplayObjectContainer;this.addChild(n),SceneManager.instance=new SceneManager(t,i,n),EventCenter.instance.AddListener(GameEventTypeDefine.LoadGroupComplete,this.OnLoadGroup,this)},t.prototype.OnLoadGroup=function(){EventCenter.instance.RemoveListener(GameEventTypeDefine.LoadGroupComplete,this.OnLoadGroup,this),StaticDataPool.instance.CreatePoolData(),egret.Ticker.getInstance().register(function(e){dragonBones.WorldClock.clock.advanceTime(e/1e3)},this),this.startLoad()},t.prototype.startLoad=function(){var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT;var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1?(e.open("http://game.koko360.com/game/crazy/getUser",egret.HttpMethod.POST),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),e.send(""),e.once(egret.Event.COMPLETE,this.onPostComplete,this),e.once(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)):this.createScene()},t.prototype.onPostComplete=function(e){var t=e.currentTarget,i=JSON.parse(t.response);DataPool.instance.AddData(i),this.createScene()},t.prototype.onPostIOError=function(e){console.log("post error : "+e)},t.prototype.createScene=function(){this.startCreateScene()},t.prototype.startCreateScene=function(){SceneManager.instance.ChangeScene(SceneId.LoginScene),SceneManager.instance.AddTopPanel(PanelIdDefine.RulePanel)},t}(egret.DisplayObjectContainer);Main.deltaTime=0,Main.stageHeight=0,__reflect(Main.prototype,"Main");var AudioManager=function(){function e(){this.music=!0,this.sound=!0,this.init=!1,this["default"]="sound_bg",this.musicValue=100,this.soundValue=100,this.sound1=!0;var e=egret.localStorage.getItem("shengyin");"open"==e?(this.OpenMusic(),this.OpenSound()):"close"==e?(this.StopMusic(),this.StopSound()):null==e&&(this.OpenMusic(),this.OpenSound())}return e.prototype.PlayMusic=function(e){this["default"]=e,null!=this.backGroundSound&&(this.backGroundSound.Stop(),this.backGroundSound=null),this.music&&(0==this.init?(Main.instance.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ClickSet,this),Main.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.ClickSet,this)):(null==this.backGroundSound?this.backGroundSound=new NormalSound(this["default"],-1):this.backGroundSound.lastSoundName!=e?(this.backGroundSound.Stop(),this.backGroundSound=new NormalSound(this["default"],-1)):this.backGroundSound.lastSoundName==e&&(this.backGroundSound=new NormalSound(this["default"],-1)),this.backGroundSound.SetVolume(this.musicValue/100)))},e.prototype.ClickSet=function(e){Main.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ClickSet,this),Main.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.ClickSet,this),0==this.init?(this.init=!0,null==this.backGroundSound?this.backGroundSound=new NormalSound(this["default"],0):this.backGroundSound.Play(0)):null==this.backGroundSound?this.backGroundSound=new NormalSound(this["default"],0):this.backGroundSound.Play(0),this.backGroundSound.SetVolume(this.musicValue/100)},e.prototype.OpenMusic=function(){this.music=!0,this.PlayMusic(this["default"])},e.prototype.StopMusic=function(){this.music=!1,this.backGroundSound&&this.backGroundSound.Stop()},e.prototype.PlaySound=function(e){this.sound&&(null==this.actionSound?this.actionSound=new NormalSound(e,1):this.actionSound.PlaySound(e,1),this.actionSound.SetVolume(this.soundValue/100))},e.prototype.PlaySound1=function(e,t){this.sound1=t,this.sound&&(this.sound1?(null==this.actionSound?this.actionSound=new NormalSound(e,0):this.actionSound.PlaySound(e,0),this.actionSound.SetVolume(this.soundValue/100)):null!=this.actionSound&&this.actionSound.lastSoundName==e&&(this.actionSound.Stop(),this.actionSound=null))},e.prototype.StopSound=function(){this.sound=!1},e.prototype.OpenSound=function(){this.sound=!0},e}();__reflect(AudioManager.prototype,"AudioManager");var DataManager=function(){function e(){StaticDataPool.instance=new StaticDataPool}return e}();__reflect(DataManager.prototype,"DataManager");var EventCenter=function(){function e(){this.dicArray=new DictionaryArray}return e.prototype.Clear=function(){this.dicArray.Clear()},e.prototype.AddListener=function(e,t,i){this.dicArray.Add(e,t,i)},e.prototype.RemoveListener=function(e,t,i){this.dicArray.Remove(e,t,i)},e.prototype.CallEvent=function(e,t){var i=this.dicArray.GetFunctions(e);if(null!=i)for(var n=i.list.length-1;n>=0;n--){var a=i.list[n];null!=a&&a.call(i.targetObj[n],t)}},e}();__reflect(EventCenter.prototype,"EventCenter");var FrameCenter=function(){function e(){this.run=!0,this.dicArray=new DelegateFunctionArray}return e.prototype.Clear=function(){this.dicArray.Clear()},e.prototype.AddListener=function(e,t){this.dicArray.Add(e,t)},e.prototype.RemoveListener=function(e,t){this.dicArray.Remove(e,t)},e.prototype.CallEvent=function(){if(this.run)for(var e=this.dicArray.list.length-1;e>=0;e--){var t=this.dicArray.list[e];null!=t&&t.call(this.dicArray.targetObj[e])}},e}();__reflect(FrameCenter.prototype,"FrameCenter");var LoadManager=function(){function e(e){this.index=0,this.needLoadGroup=["preload"],this.loadgroupIndex=0,this.loading=!1,this.loadArray=new Array,this.loadingView=new LoadingUI,this.parent=e}return e.prototype.InitLoad=function(){this.parent.addChild(this.loadingView),this.StartLoadGroup()},e.prototype.LoadGroup=function(e){for(var t=new Array,i=0;i<e.length;i++)null==RES.getRes(e[i])&&t.push(e[i]);this.loadgroupIndex+=1;var n="loading"+this.loadgroupIndex,a=ObjectPool.instance.GetBaseLoad();return a.LoadGroup(n,t),a},e.prototype.StartLoadGroup=function(){0==this.loading&&(this.loading=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.LoadNext())},e.prototype.LoadNext=function(){this.index>=this.needLoadGroup.length?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),EventCenter.instance.CallEvent(GameEventTypeDefine.LoadGroupComplete,null),this.loading=!1):(this.nowLoading=this.needLoadGroup[this.index],this.index+=1,RES.loadGroup(this.needLoadGroup[this.index-1]))},e.prototype.onResourceLoadComplete=function(e){this.LoadNext(),"preload"==e.groupName&&this.parent.removeChild(this.loadingView)},e.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},e.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},e}();__reflect(LoadManager.prototype,"LoadManager");var NetManager=function(){function e(){this.lastSend=0,this.myHttpRequest=new MyHttpRequest}return e.prototype.SendStr=function(e,t){this.myHttpRequest.SendPkt(e,t)},e.prototype.Destroy=function(){this.myHttpRequest.Destroy()},e}();__reflect(NetManager.prototype,"NetManager");var BaseLoad=function(){function e(){}return e.prototype.LoadGroup=function(e,t){this.groupName=e,this.total=this.len=t.length,this.keys=t},e.prototype.StartLoad=function(){if(0==this.total)ObjectPool.instance.PushBaseLoad(this),EventCenter.instance.CallEvent(GameEventTypeDefine.LoadOneGroupComplete,this);else for(var e=0;e<this.total;e++)RES.getResAsync(this.keys[e],this.LoadASyncComplete,this)},e.prototype.LoadASyncComplete=function(e,t){this.len-=1,EventCenter.instance.CallEvent(GameEventTypeDefine.LoadProgress,this.total-this.len+"/"+this.total),0==this.len&&(ObjectPool.instance.PushBaseLoad(this),EventCenter.instance.CallEvent(GameEventTypeDefine.LoadOneGroupComplete,this))},e}();__reflect(BaseLoad.prototype,"BaseLoad");var MyHttpRequest=function(){function e(){this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT;var e=location.href,t=e.indexOf("http://game.koko360.com");t>-1&&this.request.open("http://game.koko360.com/game/crazy/getUser",egret.HttpMethod.POST),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),this.request.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),this.request.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)}return e.prototype.SendPkt=function(e,t){this.msg=e,this.url=t,this.request.responseType=egret.HttpResponseType.TEXT,this.request.open(t,egret.HttpMethod.POST),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),this.request.send(e)},e.prototype.onPostComplete=function(e){var t=e.currentTarget,i=JSON.parse(t.response);DataPool.instance.AddData(i)},e.prototype.onPostIOError=function(e){console.log("post error : "+e)},e.prototype.onPostProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e.prototype.Destroy=function(){null!=this.request&&(this.request.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onPostComplete,this),this.request.removeEventListener(egret.Event.CONNECT,this.onPostIOError,this),this.request.removeEventListener(egret.Event.CLOSE,this.onPostProgress,this))},e}();__reflect(MyHttpRequest.prototype,"MyHttpRequest");var BackPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skins/public/BackPanelSkin.exml",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},t.prototype.onAddToStage=function(e){this.load()},t.prototype.load=function(){this.loader=new egret.URLLoader,this.loader.once(egret.Event.COMPLETE,this.complete,this),this.loader.dataFormat=egret.URLLoaderDataFormat.TEXTURE;var e=new egret.URLRequest("resource/assets/UI/public/BtnBack.png");this.loader.load(e)},t.prototype.complete=function(e){this.ImgBack.texture=this.loader.data},t.prototype.OnClick=function(e){window.location.href="http://game.koko360.com/"},t.prototype.Destroy=function(){e.prototype.Destroy.call(this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)
},t}(BasePanel);__reflect(BackPanel.prototype,"BackPanel");var LoginTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.skinName="resource/skins/public/LoginTipsPanelSkin.exml",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,AITool.drawRoundRect1(this.bg,this.bg.x,this.bg.y,this.bg.width,this.bg.height,20,this.group,0),AITool.drawRoundRect1(this.txtBtn,this.txtBtn.x,this.txtBtn.y-20,this.txtBtn.width,this.txtBtn.height+20,20,this.group,0),this.Show(),this.txtBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(e){this.txtBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),window.location.href="http://game.koko360.com/index/login/index.html",SceneManager.instance.RemoveLoginTipsPanel(this)},t.prototype.Create=function(e,t,i,n){this.tit=e,this.des=t,this.btn=i,this.colour=n,this.Show()},t.prototype.Show=function(){this.bl&&(this.txtTitle.text=this.tit,this.txtDes.text=this.des,this.txtBtn.text=this.btn,this.txtBtn.background=!0,this.txtBtn.backgroundColor=this.colour)},t}(eui.Component);__reflect(LoginTipsPanel.prototype,"LoginTipsPanel");var ProgressImg=function(e){function t(t,i,n){var a=e.call(this)||this,s=new eui.Image;s.source=t,s.x=41,s.y=14,a.addChild(s);var r=new eui.Image;r.source=i,r.x=50,r.y=20,a.addChild(r),a.proWidth=r.width;var o=a.getRoundRect(238,28,0,28,14);o.x=50,o.y=20,a.addChild(o),r.mask=o,a.progress=r;var h=new eui.Image;return h.source=n,h.x=0,h.y=0,a.addChild(h),a}return __extends(t,e),t.prototype.getRoundRect=function(e,t,i,n,a,s,r,o){void 0===a&&(a=1),void 0===s&&(s=1),void 0===r&&(r=0),void 0===o&&(o=0);var h=new egret.Sprite;return h.graphics.lineStyle(2,i),h.graphics.beginFill(n),h.graphics.drawRoundRect(r,o,e,t,a,s),h.graphics.lineStyle(2,i),h.graphics.endFill(),h},t.prototype.update=function(e){this.progress.x=-188+238*e},t}(egret.Sprite);__reflect(ProgressImg.prototype,"ProgressImg");var TipsPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.skinName="resource/skins/public/TipsPanelSkin.exml",t}return __extends(t,e),t.prototype.Create=function(e){this.tips=e,this.Show(),this.touchEnabled=!1},t.prototype.SetIndex=function(e){this.index=e},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,AITool.drawRoundRect(this.bg,this,0),this.Show()},t.prototype.onComplete=function(){SceneManager.instance.RemoveTipsPanel(this)},t.prototype.Show=function(){if(this.bl){var e=egret.Tween.get(this);e.wait(300),e.to({y:this.y-300},700),e.to({alpha:0},500),e.call(this.onComplete,this),this.txtDesc&&this.tips&&(this.txtDesc.text=this.tips),this.index&&(this.bg.y+=80*this.index,this.txtDesc.y+=80*this.index)}},t}(eui.Component);__reflect(TipsPanel.prototype,"TipsPanel");var StaticDataPool=function(){function e(){this.maxValue=999999,this.staticdaojuModel=new StaticdaojuItemModel,this.StaticRewardModel=new StaticTurntableRewardItemModel}return e.prototype.CreatePoolData=function(){this.staticdaojuModel.AddData(this.GetDataArray("daojuItem_csv")),this.StaticRewardModel.AddData(this.GetDataArray("TurntableRewardItem_csv"))},e.prototype.GetDataArray=function(e){for(var t=RES.getRes(e),i=t.split("\n",this.maxValue),n=i.length-1;n>=0;n--)(""==i[n]||null==i[n])&&i.splice(n,1);return i},e}();__reflect(StaticDataPool.prototype,"StaticDataPool");var StaticdaojuItemModel=function(){function e(){this.datapool=new Array}return e.prototype.AddData=function(e){for(var t=1;t<e.length;t++){e[t]=e[t].replace("\r","");var i=e[t].split(",",9999999),n=new StaticdaojuItemVo(i);this.datapool.push(n)}},e}();__reflect(StaticdaojuItemModel.prototype,"StaticdaojuItemModel");var StaticTurntableRewardItemModel=function(){function e(){this.datapool=new Array}return e.prototype.AddData=function(e){for(var t=1;t<e.length;t++){e[t]=e[t].replace("\r","");var i=e[t].split(",",9999999),n=new StaticTurntableRewardItemVo(i);this.datapool.push(n)}},e.prototype.getItemVo=function(e){for(var t=0;t<this.datapool.length;t++)if(this.datapool[t].id==e)return this.datapool[t];return null},e}();__reflect(StaticTurntableRewardItemModel.prototype,"StaticTurntableRewardItemModel");var StaticdaojuItemVo=function(){function e(e){this.id=parseInt(e[0]),this.name=e[1],this.price=e[2],this.resourcesName=e[3],this.describe=e[4]}return e}();__reflect(StaticdaojuItemVo.prototype,"StaticdaojuItemVo");var StaticTurntableRewardItemVo=function(){function e(e){this.id=parseInt(e[0]),this.name=e[1],this.resourcesName=e[2],this.gongneng=e[3],this.describe=e[4],this.title=e[5]}return e}();__reflect(StaticTurntableRewardItemVo.prototype,"StaticTurntableRewardItemVo");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AITool=function(){function e(){}return e.GetAI=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e.Disrupt=function(e){for(var t=e.length;t;){var i=Math.floor(Math.random()*t--);n=[e[t],e[i]],e[i]=n[0],e[t]=n[1]}return e;var n},e.NumberToImage=function(e,t,i,n){for(var a=n+"",s=0;s<e.length;s++)e[s].visible=!1;for(var s=0;s<a.length&&!(e.length<=s);s++)e[s].visible=!0,e[s].source=t+a.charAt(s)+i},e.drawRoundRect=function(e,t,i){var e=e,n=new egret.Sprite;n.graphics.beginFill(255),n.graphics.drawRoundRect(164,288,422,112,40,40),n.graphics.endFill(),t.addChild(n),e.mask=n},e.GetNum=function(e,t){var i=Math.floor(Math.random()*(e-t+1)+t);return i},e.drawRoundRect1=function(e,t,i,n,a,s,r,o){var e=e,h=new egret.Sprite;h.graphics.beginFill(255),h.graphics.drawRoundRect(t,i,n,a,s,s),h.graphics.endFill(),r.addChild(h),e.mask=h},e.drawRect=function(e,t,i,n,a,s){var e=e,r=new egret.Sprite;r.graphics.beginFill(255),r.graphics.drawRect(t,i,n,a),r.graphics.endFill(),s.addChild(r),e.mask=r},e.drawCircle=function(e,t,i,n,a){var e=e,s=new egret.Sprite;s.graphics.beginFill(255),s.graphics.drawCircle(t+n,i+n,n),s.graphics.endFill(),a.addChild(s),e.mask=s},e}();__reflect(AITool.prototype,"AITool");var Progress=function(e){function t(t,i,n,a,s,r,o){var h=e.call(this)||this;h.colorbarF=o,h.colorbarL=r,h.colorbgF=s,h.colorbgL=a;var l=h.getRoundRect(t,i,h.colorbgL,h.colorbgF,i,n);h.addChild(l);var c=h.getRoundRect(t,i,h.colorbarL,h.colorbarF,i,n);h.addChild(c),h.proWidth=c.width;var u=h.getRoundRect(t,i,0,i,n);return h.addChild(u),c.mask=u,h.progress=c,h}return __extends(t,e),t.prototype.getRoundRect=function(e,t,i,n,a,s,r,o){void 0===a&&(a=1),void 0===s&&(s=1),void 0===r&&(r=0),void 0===o&&(o=0);var h=new egret.Sprite;return h.graphics.lineStyle(2,i),h.graphics.beginFill(n),h.graphics.drawRoundRect(r,o,e,t,a,s),h.graphics.lineStyle(2,i),h.graphics.endFill(),h},t.prototype.getRect=function(e,t,i,n,a){void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0);var s=new egret.Sprite;return s.graphics.beginFill(i),s.graphics.drawRect(n,a,e,t),s.graphics.endFill(),s},t.prototype.getCircle=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0);var a=new egret.Sprite;return a.graphics.beginFill(t),a.graphics.drawCircle(i,n,e),a.graphics.endFill(),a},t.prototype.update=function(e){this.progress.scaleX=e},t}(egret.Sprite);__reflect(Progress.prototype,"Progress");var FuHuoPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.num=5,t.panelId=PanelIdDefine.FuHuoPanel,t.skinName="resource/skins/UI/GameOver/FuHuoPanelSkin.exml",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,MainPanel.speed=0,MainPanel.obstacleSpeed=0,MainPanel.playerSpeed=0,this.timer=new egret.Timer(1e3,this.num),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start(),this.btnfuhuo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.tiaoguo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),EventCenter.instance.AddListener(GameEventTypeDefine.NEEDJIFEN,this.ShowView,this)},t.prototype.timerFunc=function(){this.num--,this.tiaoguo.text="跳过("+this.num+"秒)>>"},t.prototype.timerComFunc=function(){SceneManager.instance.ChangeScene(SceneId.OverScene),SceneManager.instance.RemoveTopPanel(PanelIdDefine.FuHuoPanel)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btnfuhuo:var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1?DataPool.instance.jifen>DataPool.instance.needjifen?(NetManager.instance.SendStr("ordernum="+DataPool.instance.getstar.ordernum,"http://game.koko360.com/game/crazy/relive"),MainPanel.isOver=!1,MainPanel.shengming=6,MainPanel.isFuHuo=!0,SceneManager.instance.RemoveTopPanel(PanelIdDefine.FuHuoPanel)):SceneManager.instance.CreateTipsPanel("参与数额不足"):(MainPanel.isOver=!1,MainPanel.shengming=6,MainPanel.isFuHuo=!0,SceneManager.instance.RemoveTopPanel(PanelIdDefine.FuHuoPanel));break;case this.tiaoguo:SceneManager.instance.ChangeScene(SceneId.OverScene),SceneManager.instance.RemoveTopPanel(PanelIdDefine.FuHuoPanel)}},t.prototype.ShowView=function(){this.bl&&(this.price.text=DataPool.instance.needjifen+"乐豆")},t.prototype.Destroy=function(){this.btnfuhuo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.tiaoguo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),EventCenter.instance.RemoveListener(GameEventTypeDefine.NEEDJIFEN,this.ShowView,this)},t}(BasePanel);__reflect(FuHuoPanel.prototype,"FuHuoPanel");var GameOverPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.cengNum=0,t.baifenNum=0,t.qukuaiNum=0,t.biNum=0,t.biaoshiNum="",t.heightNum=0,t.haxizhiNum=0,t.panelId=PanelIdDefine.GameOverPanel,t.skinName="resource/skins/UI/GameOver/GameOverPanelSkin.exml",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,AITool.drawRoundRect1(this.bg,this.bg.x,this.bg.y,this.bg.width,this.bg.height,116,this.group,0),this.cengNum=MainPanel.cengNum,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),EventCenter.instance.AddListener(GameEventTypeDefine.GAMEOVER,this.ShowView,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btn:var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("","http://game.koko360.com/game/crazy/start"),SceneManager.instance.ChangeScene(SceneId.MainScene),SceneManager.instance.AddTopPanel(PanelIdDefine.StartMainPanel)}},t.prototype.ShowView=function(){this.bl&&(this.baifenNum=DataPool.instance.getGameOver.rank,this.qukuaiNum=DataPool.instance.getGameOver.count,this.biNum=DataPool.instance.getGameOver.run,this.biaoshiNum=DataPool.instance.getGameOver.address,this.heightNum=DataPool.instance.getGameOver.high,this.haxizhiNum=DataPool.instance.getGameOver.hash,this.txt.textFlow=(new egret.HtmlTextParser).parser('<font size="84" color="#FFC740">'+this.cengNum+'</font><font size="26" color="#ffffff">  层 \n \n</font ><font size="26" color="#ffffff">超过</font><font size="26" color="#FFD14C"> '+this.baifenNum+' </font><font size="26" color="#ffffff"> 的玩家  \n \n</font><font size="30" color="#ffffff">游戏中成功引爆 </font><font size="32" color="#FFC740"> '+this.qukuaiNum+' </font><font size="30" color="#ffffff">个区块  \n \n</font><font size="30" color="#ffffff">获得了  </font><font size="34" color="#FFC740"> '+this.biNum+' </font><font size="30" color="#ffffff"> 个虚拟币  \n \n</font><font size="30" color="#ffffff">矿工标识：'+this.biaoshiNum+'  \n \n</font><font size="30" color="#ffffff"> 区块高度：'+this.heightNum+'  \n \n</font><font size="30" color="#ffffff"> 哈希值：'+this.haxizhiNum+' \n \n</font><font size="30" color="#ffffff"> 一  </font><font size="26" color="#ffffff">一链到底</font><font size="30" color="#ffffff">  一 </font><font size="50" color="#ffffff"> \n</font><font size="24" color="#ffffff"> 注：游戏中获得的虚拟币可随时提到离线钱包</font>'))},t.prototype.Destroy=function(){EventCenter.instance.RemoveListener(GameEventTypeDefine.GAMEOVER,this.ShowView,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t}(BasePanel);__reflect(GameOverPanel.prototype,"GameOverPanel");var LoginPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skins/UI/LoginPanelSkin.exml",t.panelId=PanelIdDefine.LoginPanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btnStart:var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("","http://game.koko360.com/game/crazy/start"),SceneManager.instance.ChangeScene(SceneId.MainScene),SceneManager.instance.AddTopPanel(PanelIdDefine.StartMainPanel)}},t.prototype.Destroy=function(){e.prototype.Destroy.call(this),this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t}(BasePanel);__reflect(LoginPanel.prototype,"LoginPanel");var HeChengPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.num=1,t.skinName="resource/skins/UI/main/HeChengPanelSkin.exml",t.panelId=PanelIdDefine.HeChengPanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("ordernum="+DataPool.instance.getstar.ordernum+"&&stepnum="+MainPanel.cengNum,"http://game.koko360.com/game/crazy/enouth"),this.group.visible=!1,this.gold.visible=!1,this.btn.visible=!1,this.Marking.visible=!1,this.pao1.visible=!1,this.pao2.visible=!1,this.pao1.anchorOffsetX=this.pao1.width/2,this.pao1.anchorOffsetY=this.pao1.height/2,this.pao2.anchorOffsetX=this.pao2.width/2,this.pao2.anchorOffsetY=this.pao2.height/2,this.bl=!0,FrameCenter.instance.AddListener(this.Frame,this),this.gold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),EventCenter.instance.AddListener(GameEventTypeDefine.ENOUTH,this.show,this)},t.prototype.Frame=function(){!this.contains(this.hecheng)&&this.num<=10&&this.ShowView()},t.prototype.show=function(){this.txt1.textFlow=(new egret.HtmlTextParser).parser('<font color="#ffffff"> 区块高度\n</font><font color="#ffffff">'+DataPool.instance.getHecheng.high+"</font>"),this.txt2.textFlow=(new egret.HtmlTextParser).parser('<font color="#ffffff"> 哈希值\n</font><font color="#ffffff">'+DataPool.instance.getHecheng.hash+"</font>"),this.Marking.text="旷工标识："+DataPool.instance.getHecheng.address},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.gold:this.gold.touchEnabled=!1,this.btn.visible=!0,this.Marking.visible=!0,this.pao1.visible=!0,this.pao2.visible=!0,this.pao1.x=this.gold.x+this.gold.width/2,this.pao1.y=this.gold.y+this.gold.height/2,this.pao1.scaleX=0,this.pao1.scaleY=0,this.pao2.x=this.gold.x+this.gold.width/2,this.pao2.y=this.gold.y+this.gold.height/2,this.pao2.scaleX=0,this.pao2.scaleY=0,egret.Tween.get(this.pao1).to({y:352,x:135+this.pao1.width/2,scaleX:1,scaleY:1},500),egret.Tween.get(this.pao2).to({y:435,x:540+this.pao1.width/2,scaleX:1,scaleY:1},500);break;case this.btn:MainPanel.speed=1,MainPanel.obstacleSpeed=5,MainPanel.playerSpeed=20,SceneManager.instance.RemoveTopPanel(PanelIdDefine.HeChengPanel)}},t.prototype.ShowView=function(){this.bl&&(this.num>10||(this.hecheng=new NormalEffect("hecheng"+this.num,this,0,Main.stageHeight-1334,24,1),this.hecheng.scaleX=2,this.hecheng.scaleY=2),this.num>=7&&(this.group.visible=!0,this.gold.visible=!0),this.num++,MainPanel.speed=0,MainPanel.obstacleSpeed=0,MainPanel.playerSpeed=0)},t.prototype.Destroy=function(){FrameCenter.instance.RemoveListener(this.Frame,this),this.gold.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),EventCenter.instance.RemoveListener(GameEventTypeDefine.ENOUTH,this.show,this)},t}(BasePanel);__reflect(HeChengPanel.prototype,"HeChengPanel");var MainPanel=function(e){function t(){var t=e.call(this)||this;return t.arr=[1,2,3,4,5],t.Zheight=5538,t.zimubili=0,t.size=[0,48,90,128,190,242,288,325,378,455],t.click=!1,t.num=0,t.index=9999,t.skinName="resource/skins/UI/main/MainPanelSkin.exml",t.panelId=PanelIdDefine.MainPanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),EventCenter.instance.AddListener(GameEventTypeDefine.GETSTART,this.isZiMu,this),this.Init()},t.prototype.Init=function(){t.PlayerState=3,t.speed=0,t.obstacleSpeed=0,t.playerSpeed=20,t.isFly=!1,t.isTiaozhuan=!0,t.iSshield=!1,t.isZiMuW=!1,t.shengming=6,t.cengNum=0,t.fuhuoNum=0,t.isOver=!1,AITool.drawCircle(this.txtC,this.txtC.x,this.txtC.y,this.txtC.width/2,this.zimuGroup),AITool.drawCircle(this.txtH,this.txtH.x,this.txtH.y,this.txtH.width/2,this.zimuGroup),AITool.drawCircle(this.txtA,this.txtA.x,this.txtA.y,this.txtA.width/2,this.zimuGroup),AITool.drawCircle(this.txtN,this.txtN.x,this.txtN.y,this.txtN.width/2,this.zimuGroup),AITool.drawCircle(this.txtG,this.txtG.x,this.txtG.y,this.txtG.width/2,this.zimuGroup),AITool.drawCircle(this.txtW,this.txtW.x,this.txtW.y,this.txtW.width/2,this.zimuGroup),AITool.drawCircle(this.txtA1,this.txtA1.x,this.txtA1.y,this.txtA1.width/2,this.zimuGroup),AITool.drawCircle(this.txtN1,this.txtN1.x,this.txtN1.y,this.txtN1.width/2,this.zimuGroup),this.obstacleGroup.height=Main.stageHeight-50,AITool.drawRect(this.obstacleGroup,0,90,750,this.obstacleGroup.height,this),this.cAry=new Array,this.hAry=new Array,this.aAry=new Array,this.nAry=new Array,this.gAry=new Array,this.wAry=new Array,this.obstacleArr=new Array;for(var e=0;10>e;e++)if(4==e){var i=new Array,n=new Obstacle;this.obstacleGroup.addChild(n),n.state(15),this.obstacleArr.length>0?n.y=this.obstacleArr[this.obstacleArr.length-1][0].y+AITool.GetNum(180,200):n.y=0,n.x=this.size[Math.floor(8*Math.random())],i.push(n);var a=!1;if(i.push(a),a){var s=new ZiMu;this.obstacleGroup.addChild(s),s.Init(),s.x=n.x+(n.width/2-s.width),"tanhuang"==n.name?s.y=n.y+30:s.y=n.y,i.push(s)}this.obstacleArr.push(i)}else this.addObstacle();this.player=new Player,this.obstacleGroup.addChildAt(this.player,99999999997),this.player.x=this.obstacleArr[4][0].x,this.player.y=this.obstacleArr[4][0].y+50,this.player.player=PlayerState.STAND,this.player.init(),this.JG=new BaseMovieClip("JG",this.obstacleGroup,"eft",24,-1,99999999999),this.group1.y=0,this.group1.height=5538,this.group2.height=5538,this.arrimg1=new Array,this.arrimg2=new Array,this.arrimg1.push(this.img1),this.arrimg1.push(this.img2),this.arrimg1.push(this.img3),this.arrimg1.push(this.img4),this.arrimg1.push(this.img5),this.arrimg2.push(this.img6),this.arrimg2.push(this.img7),this.arrimg2.push(this.img8),this.arrimg2.push(this.img9),this.arrimg2.push(this.img10),this.arr=AITool.Disrupt(this.arr),this.setBg1(this.arr),this.arr=AITool.Disrupt(this.arr),this.setBg2(this.arr),this.dgArr=new Array,this.dgArr.push(this.g1),this.dgArr.push(this.g2),this.dgArr.push(this.g3),this.dgArr.push(this.g4),this.dgArr.push(this.g5),this.dgArr.push(this.g6),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),FrameCenter.instance.AddListener(this.Frame,this)},t.prototype.checkCollision=function(e,i){this.p.x-e>10?(t.isFly?this.player.player=PlayerState.FLY:this.player.player=PlayerState.ZUO,t.PlayerState=PlayerState.ZUO):Math.abs(this.p.x-e)<20&&this.p.x<375?(t.PlayerState=PlayerState.ZUO,t.isFly?this.player.player=PlayerState.FLY:this.player.player=PlayerState.ZUO):(t.PlayerState=PlayerState.YOU,t.isFly?this.player.player=PlayerState.FLY:this.player.player=PlayerState.YOU)},t.prototype.OnClick=function(e){switch(e.type){case egret.TouchEvent.TOUCH_MOVE:this.checkCollision(e.stageX,e.stageY);break;case egret.TouchEvent.TOUCH_BEGIN:e.currentTarget.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.OnClick,this),e.currentTarget.once(egret.TouchEvent.TOUCH_END,this.OnClick,this),this.p=new egret.Point(e.stageX,e.stageY),this.checkCollision(e.stageX,e.stageY),this.click=!0;break;case egret.TouchEvent.TOUCH_END:e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.OnClick,this),e.currentTarget.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),t.isFly||(t.PlayerState=PlayerState.STAND,this.player.player=PlayerState.STAND),this.player.init(),this.click=!1}},t.prototype.Frame=function(){if(t.isFuHuo)this.setHeaght();else{this.zimubili=DataPool.instance.zimubili,0!=t.isXueNum&&(this.setXue(),t.isXueNum=0);for(var e=0;e<this.obstacleArr.length;e++)this.setObstacle(e);t.num>0&&(this.jishi(t.num),t.num=0),t.isZiMuW&&(this.wAry.push("w"),t.isZiMuW=!1),t.isFly?(t.speed=3,t.obstacleSpeed=15,t.playerSpeed=0,this.player.player=PlayerState.FLY):t.iSshield?this.player.iSshield=!0:this.player.iSshield=!1,this.player.playerState==PlayerState.TIAO?(this.tiaonum=-13,this.setTiao(30-this.tiaonum)):this.tiaonum<=0?(this.tiaonum++,this.setTiao(30-this.tiaonum)):this.tiaonum=13,this.ShengMing(),this.BgMove(),this.PlayerMove(),this.setZimu()}},t.prototype.isZiMu=function(){var e=Math.round(100*Math.random());return e<this.zimubili?!0:!1},t.prototype.Destroy=function(){e.prototype.Destroy.call(this),FrameCenter.instance.RemoveListener(this.Frame,this)},t.prototype.ShengMing=function(){this.player.playerState!=PlayerState.SI&&t.hitTest(this.player,this.JG,this.player.playerState,this.obstacleGroup)&&(this.player.player=PlayerState.SI,AudioManager.instance.PlaySound("dian"),t.iSshield?(this.player.iSshield=!1,t.iSshield=!1):t.shengming-=2,t.shengming<=0&&(this.player.y+=100),this.player.y+=100),t.shengming<=0&&(t.isOver||(SceneManager.instance.AddTopPanel(PanelIdDefine.FuHuoPanel),t.isOver=!0));for(var e=0;6>e;e++)t.shengming>e?this.dgArr[e].visible=!0:this.dgArr[e].visible=!1;t.shengming<6?(t.isOver||this.num++,this.num>200&&(t.shengming++,this.num=0)):this.num=0},t.hitTest=function(e,t,i,n){var a=new egret.Rectangle(e.x,e.y-e.height+30,42,e.height-30),s=new egret.Rectangle(t.x,t.y,t.width,t.height-55);return a.intersects(s)},t.hitZiMu=function(e,t,i){var n=new egret.Rectangle(e.x,e.y-150,60,160);if("csm"==t.name)var a=new egret.Rectangle(t.x+35,t.y-t.height+10,t.width,t.height);else var a=new egret.Rectangle(t.x+10,t.y-t.height,t.width,t.height);return n.intersects(a)},t.hitCheck=function(e,t,i){var n=new egret.Rectangle(e.x,e.y-40,42,40);if("tanhuang"==t.name?t.width=144:"shijie"==t.name?t.width=190:"csdZuo"==t.name?t.width=265:"csdYou"==t.name?t.width=265:"dingzi"==t.name?t.width=147:"taijie"==t.name&&(t.width=141),"tanhuang"==t.name)var a=(new egret.Shape,new egret.Rectangle(t.x,t.y+10,t.width,20));else if("shijie"==t.name)var a=new egret.Rectangle(t.x,t.y,t.width,20);else var a=new egret.Rectangle(t.x,t.y,t.width,20);return n.intersects(a)},t.prototype.addObstacle=function(){var e;e=t.cengNum<50?AITool.GetNum(180,200):t.cengNum>=50&&t.cengNum<100?AITool.GetNum(190,220):t.cengNum>=100&&t.cengNum<150?AITool.GetNum(200,240):t.cengNum>=150&&t.cengNum<200?AITool.GetNum(200,250):t.cengNum>=200&&t.cengNum<250?AITool.GetNum(200,260):AITool.GetNum(200,270);var i=new Array,n=new Obstacle;this.obstacleGroup.addChildAt(n,0);var a;this.obstacleArr.length>0?(n.Init(this.obstacleArr[this.obstacleArr.length-1][0].name),n.y=this.obstacleArr[this.obstacleArr.length-1][0].y+e,a=this.obstacleArr[this.obstacleArr.length-1][0].x+this.obstacleArr[this.obstacleArr.length-1][0].width>375?Math.floor(5*Math.random()):Math.floor(5*Math.random()+5)):(n.Init(null),n.y=0,a=Math.floor(10*Math.random()));var s;s=0!=a?this.size[a]+(295-n.width)/2:this.size[a];var r=s;this.obstacleArr.length>0?Math.abs(r-this.obstacleArr[this.obstacleArr.length-1][0].x)>50?n.x=s:n.x=this.size[Math.floor(10*Math.random())]:n.x=s,i.push(n);var o=this.isZiMu();if(i.push(o),o){var h=new ZiMu;this.obstacleGroup.addChildAt(h,1),h.Init(),h.x=n.x+(n.width/2-h.width),"tanhuang"==n.name?h.y=n.y+60:h.y=n.y,i.push(h)}this.obstacleArr.push(i)},t.prototype.setZimu=function(){this.cAry.length>0?(this.C.source="liang_C_png",this.txtC.text=this.cAry.length+"",this.txtC.visible=!0):(this.C.source="hui_C_png",this.txtC.visible=!1),this.hAry.length>0?(this.H.source="liang_H_png",this.txtH.text=this.hAry.length+"",this.txtH.visible=!0):(this.H.source="hui_H_png",this.txtH.visible=!1),this.aAry.length>0?(this.A.source="liang_A_png",this.aAry.length>1?this.txtA.text=this.aAry.length-1+"":this.txtA.text=this.aAry.length+"",this.txtA.visible=!0):(this.A.source="hui_A_png",this.txtA.visible=!1),this.nAry.length>0?(this.N.source="liang_N_png",this.nAry.length>1?this.txtN.text=this.nAry.length-1+"":this.txtN.text=this.nAry.length+"",this.txtN.visible=!0):(this.N.source="hui_N_png",this.txtN.visible=!1),this.gAry.length>0?(this.G.source="liang_G_png",this.txtG.text=this.gAry.length+"",this.txtG.visible=!0):(this.G.source="hui_G_png",this.txtG.visible=!1),this.wAry.length>0?(this.W.source="liang_W_png",this.txtW.text=this.wAry.length+"",this.txtW.visible=!0):(this.W.source="hui_W_png",this.txtW.visible=!1),this.aAry.length>1?(this.A1.source="liang_A_png",this.txtA1.text="1",this.txtA1.visible=!0):(this.A1.source="hui_A_png",this.txtA1.visible=!1),this.nAry.length>1?(this.N1.source="liang_N_png",this.txtN1.text="1",this.txtN1.visible=!0):(this.N1.source="hui_N_png",this.txtN1.visible=!1),this.cAry.length>0&&this.hAry.length>0&&this.aAry.length>1&&this.nAry.length>1&&this.gAry.length>0&&this.wAry.length>0&&(this.cAry.pop(),this.hAry.pop(),this.aAry.pop(),this.nAry.pop(),this.gAry.pop(),this.wAry.pop(),t.isFly&&(t.isFly=!1),this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND,SceneManager.instance.AddTopPanel(PanelIdDefine.HeChengPanel))},t.prototype.setObstacle=function(e){if(this.obstacleArr[e][0].y-=t.obstacleSpeed,this.obstacleArr[e][1]&&(this.obstacleArr[e][2].y=this.obstacleArr[e][0].y),this.obstacleArr[e][0].y<-300&&(this.obstacleGroup.removeChild(this.obstacleArr[e][0]),this.obstacleArr[e][1]&&this.obstacleGroup.removeChild(this.obstacleArr[e][2]),this.obstacleArr.shift(),this.addObstacle(),t.isFly&&t.cengNum++),this.obstacleArr[e][1]&&t.hitZiMu(this.player,this.obstacleArr[e][2],this.obstacleGroup)){switch(this.setChiZiMu(),this.obstacleArr[e][2].name){case"c":this.cAry.push("c");break;case"h":this.hAry.push("h");break;case"a":this.aAry.push("a");break;case"n":this.nAry.push("n");break;case"g":this.gAry.push("g");break;case"w":this.wAry.push("w");break;case"csm":t.isFly&&(t.isFly=!1),this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND,t.speed=0,t.obstacleSpeed=0,t.playerSpeed=0,SceneManager.instance.AddTopPanel(PanelIdDefine.TurntablePanel)}this.obstacleGroup.removeChild(this.obstacleArr[e][2]),this.obstacleArr[e].pop(),this.obstacleArr[e].pop()}if(!t.isFly&&this.player.playerState!=PlayerState.SI)if(t.hitCheck(this.player,this.obstacleArr[e][0],this.obstacleGroup)){if(this.index=e,0==this.obstacleArr[e][0]._isTouch&&(this.obstacleArr[e][0].isTouch=!0,t.cengNum++),this.player.y=this.obstacleArr[e][0].y,this.index==e)switch(this.obstacleArr[e][0].name){case"tanhuang":this.click||(this.player.player=PlayerState.TIAO,this.obstacleArr[e][0].isPlayTanHuang=!0);break;case"shijie":this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND,this.obstacleArr[e][0]._isPlayShiJie||(this.obstacleArr[e][0].isPlayShiJie=!0,this.obstacleArr[e].length>2&&this.obstacleArr[e][1]&&this.obstacleGroup.removeChild(this.obstacleArr[e][2]),this.obstacleArr.splice(e,1),this.addObstacle());break;case"dingzi":if(this.click||(t.PlayerState=PlayerState.STAND),!this.obstacleArr[e][0]._isDing&&(t.iSshield?(this.player.iSshield=!1,t.iSshield=!1):t.shengming-=2,this.obstacleArr[e][0]._isDing=!0,!this.click)){this.player.player=PlayerState.DING;egret.setTimeout(function(){this.player.player=PlayerState.STAND},this,200)}break;case"csdZuo":this.click||(t.PlayerState=PlayerState.ZUO,this.player.player=PlayerState.ZUO);break;case"csdYou":this.click||(t.PlayerState=PlayerState.YOU,this.player.player=PlayerState.YOU);break;case"taijie":this.click||(this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND)}}else if(this.index==e)switch(this.click||(this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND),this.obstacleArr[e][0].name){case"tanhuang":this.obstacleArr[e][0].isPlayTanHuang=!1;break;case"shijie":break;case"dingzi":break;case"csdZuo":this.click||(t.PlayerState=PlayerState.STAND,this.shuffling());break;case"csdYou":this.click||(t.PlayerState=PlayerState.STAND,this.shuffling());break;case"taijie":}},t.prototype.PlayerMove=function(){this.reciprocate(),this.shuffling()},t.prototype.reciprocate=function(){this.player.y+=t.playerSpeed,this.player.y<=0&&(this.player.y=0),this.player.y>=Main.stageHeight&&(this.player.y=Main.stageHeight,this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND,t.isOver||(SceneManager.instance.AddTopPanel(PanelIdDefine.FuHuoPanel),t.isOver=!0,t.iSshield&&(t.iSshield=!1)))},t.prototype.shuffling=function(){switch(t.PlayerState){case PlayerState.YOU:this.click?this.player.x+=20:this.player.x+=12,this.player.x>650&&(this.player.x=650);break;case PlayerState.ZUO:this.click?this.player.x-=20:this.player.x-=12,this.player.x<0&&(this.player.x=0);break;case PlayerState.STAND:this.player.x+=0}},t.prototype.BgMove=function(){this.group1.y<this.group2.y?(this.group1.y=this.group1.y-t.speed,this.group2.y=this.group1.y+5538,-5538==this.group1.y&&(this.arr=AITool.Disrupt(this.arr),this.setBg1(this.arr),this.group2.y=this.group2.y-t.speed,this.group1.y=this.group2.y+5538)):(this.group2.y=this.group2.y-t.speed,this.group1.y=this.group2.y+5538,-5538==this.group2.y&&(this.arr=AITool.Disrupt(this.arr),this.setBg2(this.arr),this.group1.y=this.group1.y-t.speed,this.group2.y=this.group1.y+5538))},t.prototype.setBg2=function(e){for(var t=e.length,i=0;t>i;i++){switch(e[i]){case 1:this.arrimg2[i].height=958;break;case 2:this.arrimg2[i].height=1189;break;case 3:this.arrimg2[i].height=1145;break;case 4:this.arrimg2[i].height=1315;break;case 5:this.arrimg2[i].height=931}this.arrimg2[i].source="main_bg"+e[i]+"_jpg",i>0?this.arrimg2[i].y=this.arrimg2[i-1].y+this.arrimg2[i-1].height:this.arrimg2[i].y=0}},t.prototype.setBg1=function(e){for(var t=e.length,i=0;t>i;i++){switch(e[i]){case 1:this.arrimg1[i].height=958;break;case 2:this.arrimg1[i].height=1189;break;case 3:this.arrimg1[i].height=1145;break;case 4:this.arrimg1[i].height=1315;break;case 5:this.arrimg1[i].height=931}i>0?this.arrimg1[i].y=this.arrimg1[i-1].y+this.arrimg1[i-1].height:this.arrimg1[i].y=0,this.arrimg1[i].source="main_bg"+e[i]+"_jpg"}},t.prototype.jishi=function(e){this.timer=new egret.Timer(1e3*e,1),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start()},t.prototype.timerComFunc=function(){t.isFly=!1,t.speed=1,t.obstacleSpeed=5,t.playerSpeed=20,this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this)},t.prototype.setHeaght=function(){t.isFuHuo=!1,this.player.x=this.obstacleArr[4][0].x,this.player.y=this.obstacleArr[4][0].y-1,this.player.visible=!1,this.touchEnabled=!1,this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND;new NormalEffect("fuhuo",this.obstacleGroup,this.player.x-100,this.player.y-500,24,1),egret.setTimeout(function(){this.player.visible=!0;egret.setTimeout(function(){t.speed=1,t.obstacleSpeed=5,t.playerSpeed=20,this.touchEnabled=!0},this,500)},this,1e3)},t.prototype.setXue=function(){if(this.player.player=PlayerState.STAND,t.PlayerState=PlayerState.STAND,6==t.isXueNum){new NormalEffect("xue",this.obstacleGroup,this.player.x-100,this.player.y-200,24,1),egret.setTimeout(function(){t.speed=1,t.obstacleSpeed=5,t.playerSpeed=20
},this,1e3)}else if(t.isXueNum>0&&t.isXueNum<6){egret.setTimeout(function(){t.speed=1,t.obstacleSpeed=5,t.playerSpeed=20},this,500)}},t.prototype.setTiao=function(e){this.player.y-=e},t.prototype.setChiZiMu=function(){new NormalEffect("chizimu",this.obstacleGroup,this.player.x-100,this.player.y-200,24,1)},t}(BasePanel);MainPanel.PlayerState=3,MainPanel.speed=0,MainPanel.obstacleSpeed=0,MainPanel.playerSpeed=20,MainPanel.isOver=!1,MainPanel.num=0,MainPanel.isFuHuo=!1,MainPanel.isXueNum=0,__reflect(MainPanel.prototype,"MainPanel");var Obstacle=function(e){function t(){var t=e.call(this)||this;return t._isPlayTanHuang=!1,t._isPlayShiJie=!1,t._isDing=!1,t._isTouch=!1,t.arr=[75,70,75,60,65,60,55],t}return __extends(t,e),t.prototype.Init=function(e){var t;t=this.setHeight(e),this.state(t)},t.prototype.setHeight=function(e){var t,i,n=Math.round(100*Math.random());switch(t=MainPanel.cengNum<50?this.arr[0]:MainPanel.cengNum>50&&MainPanel.cengNum<100?this.arr[1]:MainPanel.cengNum>100&&MainPanel.cengNum<150?this.arr[2]:MainPanel.cengNum>150&&MainPanel.cengNum<200?this.arr[3]:MainPanel.cengNum>200&&MainPanel.cengNum<250?this.arr[4]:MainPanel.cengNum>250&&MainPanel.cengNum<300?this.arr[5]:this.arr[6],i=t>n?15:AITool.GetNum(14,10),e){case"tanhuang":i==PlayerState.TANHUANG&&(i=PlayerState.TAIJIE);break;case"shijie":i==PlayerState.SHIJIE&&(i=PlayerState.TAIJIE);break;case"csdZuo":i==PlayerState.CSDZUO&&(i=PlayerState.TAIJIE);break;case"csdYou":i==PlayerState.CSDYOU&&(i=PlayerState.TAIJIE);break;case"dingzi":i==PlayerState.DINGZI&&(i=PlayerState.TAIJIE);break;case"taijie":i==PlayerState.TAIJIE&&(i=PlayerState.TAIJIE);break;default:var i=AITool.GetNum(15,10)}return i},t.prototype.state=function(e){switch(e){case PlayerState.TANHUANG:this.tanhuang=new BaseMovieClip("tanhuang",this,"eft",24,-1,0),this.name="tanhuang",this.tanhuang.anchorOffsetX=92,this.tanhuang.x=72,this._isPlayTanHuang?this.tanhuang.animation.gotoAndPlay(1):this.tanhuang.animation.gotoAndStop(1),this.width=170;break;case PlayerState.SHIJIE:this.shijieImg=new eui.Image,this.shijieImg.source="shijie_png",this.addChild(this.shijieImg),this.name="shijie",this.shijieImg.anchorOffsetX=165,this.shijieImg.x=97,this.shijieImg.y=-62,this.width=215;break;case PlayerState.CSDZUO:var t=new BaseMovieClip("csd",this,"eft",12,-1,0);this.name="csdZuo",t.anchorOffsetX=147.5,t.x=132,this.width=295;break;case PlayerState.CSDYOU:var i=new BaseMovieClip("csd",this,"eft",12,-1,0);i.scaleX=-1,this.name="csdYou",i.anchorOffsetX=147.5,i.x=132,this.width=295;break;case PlayerState.DINGZI:var n=new eui.Image;n.source="dingzi_png",this.addChild(n),this.name="dingzi",n.anchorOffsetX=88.5,n.x=78.5,this.width=177;break;case PlayerState.TAIJIE:var a=new eui.Image;a.source="taijie_png",this.addChild(a),this.name="taijie",a.anchorOffsetX=85.5,a.x=75.5,this.width=171}},Object.defineProperty(t.prototype,"isPlayTanHuang",{get:function(){return this.isPlayTanHuang},set:function(e){e!=this._isPlayTanHuang&&(this._isPlayTanHuang=e,this._isPlayTanHuang?this.tanhuang.animation.gotoAndPlay(1,-1):this.tanhuang.animation.gotoAndStop(1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayShiJie",{get:function(){return this.isPlayShiJie},set:function(e){e!=this._isPlayShiJie&&(this._isPlayShiJie=e,this._isPlayShiJie&&(this.removeChild(this.shijieImg),this.shijie=new NormalEffect("shijie",this,97,-62,12,1),this.name="shijie",this.shijie.anchorOffsetX=165))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDing",{get:function(){return this.isDing},set:function(e){e!=this._isDing&&(this._isDing=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTouch",{get:function(){return this.isTouch},set:function(e){e!=this._isTouch&&(this._isTouch=e)},enumerable:!0,configurable:!0}),t}(egret.Sprite);__reflect(Obstacle.prototype,"Obstacle");var Player=function(e){function t(){var t=e.call(this)||this;return t._isTiao=!0,t._isTing=!0,t._isYou=!0,t._iSshield=!0,t._isFly=!1,t}return __extends(t,e),t.prototype.init=function(){this.state1(3)},Object.defineProperty(t.prototype,"iSshield",{get:function(){return this.iSshield},set:function(e){e!=this._iSshield&&(this._iSshield=e,this.state1(MainPanel.PlayerState))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"player",{get:function(){},set:function(e){this.playerState!=e&&(this.playerState=e,this.state1(this.playerState))},enumerable:!0,configurable:!0}),t.prototype.state1=function(e){switch(this.numChildren&&this.removeChildren(),e==PlayerState.TIAO?AudioManager.instance.PlaySound1("tiao",!0):AudioManager.instance.PlaySound1("tiao",!1),e==PlayerState.FLY?AudioManager.instance.PlaySound1("fly",!0):AudioManager.instance.PlaySound1("fly",!1),e){case PlayerState.ZUO:this.zou=new BaseMovieClip("zou",this,"eft",40,-1,0),this.zou.anchorOffsetX=51.5,this.zou.anchorOffsetY=239,this.zou.x=51.5,this.zou.y=80,this._iSshield&&(this.huzhao=new BaseMovieClip("Shield",this,"eft",24,-1,99999999998),this.huzhao.anchorOffsetY=200,this.huzhao.anchorOffsetX=70);break;case PlayerState.YOU:this.zou=new BaseMovieClip("zou",this,"eft",40,-1,0),this.zou.anchorOffsetX=51.5,this.zou.anchorOffsetY=239,this.zou.x=51.5,this.zou.y=80,this.zou.scaleX=-1,this._iSshield&&(this.huzhao=new BaseMovieClip("Shield",this,"eft",24,-1,99999999998),this.huzhao.anchorOffsetY=200,this.huzhao.anchorOffsetX=70);break;case PlayerState.STAND:this.TingImg=new eui.Image,this.TingImg.source="Stand_png",this.addChild(this.TingImg),this.TingImg.anchorOffsetY=158,this.TingImg.anchorOffsetX=25.5,this.TingImg.y=-8,this._iSshield&&(this.huzhao=new BaseMovieClip("Shield",this,"eft",24,-1,99999999998),this.huzhao.anchorOffsetY=200,this.huzhao.anchorOffsetX=90);break;case PlayerState.DING:this.TingImg=new eui.Image,this.TingImg.source="hong_png",this.addChild(this.TingImg),this.TingImg.anchorOffsetY=158,this.TingImg.anchorOffsetX=25.5,this.TingImg.y=-8,this._iSshield&&(this.huzhao=new BaseMovieClip("Shield",this,"eft",24,-1,99999999998),this.huzhao.anchorOffsetY=200,this.huzhao.anchorOffsetX=90);break;case PlayerState.TIAO:this.TingImg=new eui.Image,this.TingImg.source="Stand_png",this.addChild(this.TingImg),this.TingImg.anchorOffsetY=158,this.TingImg.anchorOffsetX=25.5,this.TingImg.y=-8,this._iSshield&&(this.huzhao=new BaseMovieClip("Shield",this,"eft",24,-1,99999999998),this.huzhao.anchorOffsetY=200,this.huzhao.anchorOffsetX=90);break;case PlayerState.FLY:this.fly=new eui.Image,this.fly.source="consci_png",this.addChild(this.fly),this.fly.anchorOffsetY=161,this.fly.anchorOffsetX=25.5,this.fly.y=-8,this.flyMC=new BaseMovieClip("chongci",this,"eft",24,-1,0),this.flyMC.anchorOffsetY=392,this.flyMC.anchorOffsetX=221;break;case PlayerState.SI:this.tiao=new BaseMovieClip("si",this,"eft",24,1,0),this.tiao.anchorOffsetY=239,this.tiao.anchorOffsetX=25.5,this.tiao.y=-8;egret.setTimeout(function(){this.player=PlayerState.STAND},this,500)}},t}(egret.Sprite);__reflect(Player.prototype,"Player");var RewardPanel=function(){function e(){}return e}();__reflect(RewardPanel.prototype,"RewardPanel");var ZiMu=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.Init=function(){this.state()},t.prototype.state=function(){var e=["H","A","N","G","C"];this.zimu=new eui.Image,this.addChild(this.zimu);var t=Math.round(100*Math.random());if(t<100-DataPool.instance.breakdongbili)switch(AITool.GetAI(e)){case"H":this.zimu.source="H_png",this.zimu.y=-76,this.name="h",this.width=56;break;case"A":this.zimu.source="A_png",this.zimu.y=-75,this.name="a",this.width=64;break;case"N":this.zimu.source="N_png",this.zimu.y=-76,this.name="n",this.width=85;break;case"G":this.zimu.source="G_png",this.zimu.y=-79,this.name="g",this.width=70;break;case"W":this.zimu.source="W_png",this.zimu.y=-71,this.name="w",this.width=69;break;case"C":this.zimu.source="C_png",this.zimu.y=-75,this.name="c",this.width=57}else this.hedong=new BaseMovieClip("csm",this,"eft",24,-1,0),this.name="csm",this.hedong.y=-165,this.hedong.x=-40,this.width=105,this.height=105},t}(egret.Sprite);__reflect(ZiMu.prototype,"ZiMu");var ReadyGoPanel=function(e){function t(){var t=e.call(this)||this;return t.isFly=!1,t.isShield=!1,t.panelId=PanelIdDefine.ReadyGoPanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bg=new eui.Rect,this.addChild(this.bg),this.bg.width=750,this.bg.height=Main.stageHeight,this.bg.alpha=0,this.width=750,this.height=Main.stageHeight,this.readygo=new BaseMovieClip("readygo",this,"eft",24,1,0),this.readygo.anchorOffsetX=356,this.readygo.anchorOffsetY=333,this.readygo.x=this.width/2,this.readygo.y=this.height/2,AudioManager.instance.PlaySound("readygo"),FrameCenter.instance.AddListener(this.Frame,this)},t.prototype.Frame=function(){null!=this.readygo&&this.readygo.animation.currentFrame==this.readygo.animation.totalFrames&&(this.readygo.Destroy(),this.isFly&&(MainPanel.isFly=!0,MainPanel.num=3),this.isShield&&(MainPanel.iSshield=!0),MainPanel.speed=1,MainPanel.obstacleSpeed=5,MainPanel.playerSpeed=20,SceneManager.instance.RemovePanel(PanelIdDefine.ReadyGoPanel))},t.prototype.Create=function(e,t){this.isFly=e,this.isShield=t},t.prototype.Destroy=function(){FrameCenter.instance.RemoveListener(this.Frame,this)},t}(BasePanel);__reflect(ReadyGoPanel.prototype,"ReadyGoPanel");var RulePanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.skinName="resource/skins/UI/RulePanelSkin.exml",t.panelId=PanelIdDefine.RulePanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,MainPanel.speed=0,MainPanel.playerSpeed=0,MainPanel.obstacleSpeed=0,AITool.drawRoundRect1(this.bg,this.bg.x,this.bg.y,this.bg.width,this.bg.height,20,this.group,16777215),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.ShowView()},t.prototype.OnClick=function(e){MainPanel.speed=1,MainPanel.obstacleSpeed=5,MainPanel.playerSpeed=20,SceneManager.instance.RemoveTopPanel(PanelIdDefine.RulePanel)},t.prototype.ShowView=function(){this.bl&&(this.txtcontent.lineSpacing=26,this.txtcontent.textFlow=(new egret.HtmlTextParser).parser('<font color="#666666">游戏中遇到黑洞, 将获得一次抽奖机会！\n</font><font color="#666666">游戏过程中集齐</font ><font color="#665CEC"> “C” “H” “A” “N” “G” “W” “A” “N”   \n</font><font color="#666666">8个字母, 将会获得区块奖励, 奖励数额完全随机, 本局内收集的字母可累计叠加, 下局将全部作废, 需要从新开始收集。\n</font><font color="#666666">所有区块数据, 公开可查。 </font>'))},t.prototype.Destroy=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t}(BasePanel);__reflect(RulePanel.prototype,"RulePanel");var StartMainPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.num=5,t.isFly=!1,t.isShield=!1,t.skinName="resource/skins/UI/StartMainPanelSkin.exml",t.panelId=PanelIdDefine.StartMainPanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,MainPanel.speed=0,MainPanel.obstacleSpeed=0,this.skip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.icon1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.timer=new egret.Timer(1e3,this.num),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),EventCenter.instance.AddListener(GameEventTypeDefine.GETSTART,this.ShowView,this),this.timer.start()},t.prototype.timerFunc=function(){this.num--,this.txt.text=this.num+""},t.prototype.timerComFunc=function(){var e=SceneManager.instance.AddPanel(PanelIdDefine.ReadyGoPanel);e.Create(this.isFly,this.isShield),SceneManager.instance.RemoveTopPanel(PanelIdDefine.StartMainPanel)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.icon:if(DataPool.instance.jifen>1*DataPool.instance.getstar.tools[1].price){var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("toolid="+DataPool.instance.getstar.tools[1].id+"&&ordernum="+DataPool.instance.getstar.ordernum,"http://game.koko360.com/game/crazy/buytool"),this.icon.alpha=.5,this.isShield=!0,DataPool.instance.jifen-=DataPool.instance.getstar.tools[1].price}else SceneManager.instance.CreateTipsPanel("参与数额不足！");break;case this.icon1:if(DataPool.instance.jifen>1*DataPool.instance.getstar.tools[0].price){var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("toolid="+DataPool.instance.getstar.tools[0].id+"&&ordernum="+DataPool.instance.getstar.ordernum,"http://game.koko360.com/game/crazy/buytool"),this.icon1.alpha=.5,this.isFly=!0,DataPool.instance.jifen-=DataPool.instance.getstar.tools[0].price}else SceneManager.instance.CreateTipsPanel("参与数额不足！");break;case this.skip:var n=SceneManager.instance.AddPanel(PanelIdDefine.ReadyGoPanel);n.Create(this.isFly,this.isShield),SceneManager.instance.RemoveTopPanel(PanelIdDefine.StartMainPanel)}},t.prototype.ShowView=function(){if(this.bl){var e=DataPool.instance.getstar.tools;null!=e&&(this.icon.source=e[1].img,this.Name.text=e[1].name,this.Price.text=e[1].price+"乐豆",this.describe.text=e[1].descript,this.icon1.source=e[0].img,this.Name1.text=e[0].name,this.Price1.text=e[0].price+"乐豆",this.describe1.text=e[0].descript)}},t.prototype.Destroy=function(){this.skip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.icon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.icon1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),EventCenter.instance.RemoveListener(GameEventTypeDefine.GETSTART,this.ShowView,this)},t}(BasePanel);__reflect(StartMainPanel.prototype,"StartMainPanel");var TopPanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.skinName="resource/skins/UI/TopPanelSkin.exml",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bl=!0,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btnRule.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btnBack:window.location.href="http://game.koko360.com/";break;case this.btnRule:SceneManager.instance.AddTopPanel(PanelIdDefine.RulePanel)}},t.prototype.Destroy=function(){e.prototype.Destroy.call(this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btnRule.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t}(BasePanel);__reflect(TopPanel.prototype,"TopPanel");var TurntablePanel=function(e){function t(){var t=e.call(this)||this;return t.bl=!1,t.speed=60,t.beishu=3,t.clicknum=0,t.num=5,t.skinName="resource/skins/UI/turntable/TurntablePanelSkin.exml",t.panelId=PanelIdDefine.TurntablePanel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),MainPanel.speed=0,MainPanel.obstacleSpeed=0,MainPanel.playerSpeed=0,this.qian.visible=!0,this.hou.visible=!0,this.bl=!0,this.hou.scaleX=0,this.hou.scaleY=0,this.lightAni(),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),this.skip.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),EventCenter.instance.AddListener(GameEventTypeDefine.HEIDONG,this.show,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btnGo:switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:if(this.btnGo.once(egret.TouchEvent.TOUCH_END,this.OnClick,this),this.clicknum++,2==this.clicknum){this.btnGo.source="turntable_stop1_png";var t=location.href,i=t.indexOf("http://game.koko360.com");i>-1&&NetManager.instance.SendStr("gradeid="+DataPool.instance.getstar.gradeid+"&&ordernum="+DataPool.instance.getstar.ordernum+"&&stepnum="+MainPanel.cengNum+"&&beizhu=大转盘","http://game.koko360.com/game/crazy/heidong"),this.timer1=new egret.Timer(3e3,1),this.timer1.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.show,this),this.timer1.start(),this.startStopTurn()}else 1==this.clicknum&&(this.btnGo.source="turntable_go1_png",this.startTurn());this.beishu=2,this.lightAni(),console.log("clicknum1:"+this.clicknum);break;case egret.TouchEvent.TOUCH_END:this.btnGo.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),this.btnGo.source="turntable_stop_png",this.beishu=1,this.lightAni(),console.log("clicknum2:"+this.clicknum)}break;case this.skip:switch(this.prize_id){case 1:case 4:break;case 2:MainPanel.isZiMuW=!0;break;case 3:MainPanel.isFly=!0,MainPanel.num=1.5;break;case 5:MainPanel.iSshield=!0;break;case 6:MainPanel.shengming=6}MainPanel.isXueNum=this.prize_id,SceneManager.instance.RemoveTopPanel(PanelIdDefine.TurntablePanel)}},t.prototype.show=function(){this.timer1.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.show,this),console.log("result:"+DataPool.instance.getHeidong.result),this.prize_id=DataPool.instance.getHeidong.result,console.log("prize_id:"+this.prize_id),this.deg=360-60*this.prize_id,this.duration=this.calcDuration(this.deg),this.stopTurn(),this.ShowView()},t.prototype.ShowView=function(){this.bl&&(this.staticTurntable=StaticDataPool.instance.StaticRewardModel.getItemVo(this.prize_id),null!=this.staticTurntable&&(this.xin.source=this.staticTurntable.resourcesName,this.txtitle.text=this.staticTurntable.gongneng,this.txtdescribe.text=this.staticTurntable.describe,this.title.source=this.staticTurntable.title))},t.prototype.Destroy=function(){this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.skip.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnClick,this),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),EventCenter.instance.RemoveListener(GameEventTypeDefine.HEIDONG,this.show,this)},t.prototype.timerFunc=function(){this.num--,this.skip.text="跳过 ( "+this.num+"秒 ) >>"},t.prototype.timerComFunc=function(){switch(this.prize_id){case 1:case 4:break;case 2:MainPanel.isZiMuW=!0;break;case 3:MainPanel.isFly=!0,MainPanel.num=1.5;break;case 5:MainPanel.iSshield=!0;break;case 6:MainPanel.shengming=6}MainPanel.speed=1,MainPanel.obstacleSpeed=5,MainPanel.playerSpeed=20,SceneManager.instance.RemoveTopPanel(PanelIdDefine.TurntablePanel)},t.prototype.startTurn=function(){console.log("*********startTurn********"),egret.Tween.get(this.turntable,{loop:!0}).to({rotation:360},360)},t.prototype.startStopTurn=function(){console.log("*********startStopTurn********"),egret.Tween.removeTweens(this.turntable),egret.Tween.get(this.turntable,{loop:!0}).to({rotation:360},720)},t.prototype.stopTurn=function(){console.log("*********stopTurn********"),console.log(this.deg,this.duration),egret.Tween.removeTweens(this.turntable),egret.Tween.get(this.turntable).to({rotation:this.deg},this.duration).call(function(){var e=new BaseMovieClip("kuang",this.qian,"eft",24,-1,4);e.x=236,e.y=230,this.beishu=3,this.lightAni()},this).wait(500).call(function(){egret.Tween.get(this.qian).to({scaleX:0,scaleY:0},100)},this).wait(100).call(function(){this.swapChildren(this.hou,this.qian),1==this.prize_id||4==this.prize_id?AudioManager.instance.PlaySound("noPrize"):AudioManager.instance.PlaySound("Prize"),egret.Tween.get(this.hou).to({scaleX:1,scaleY:1},500),this.GuangTurn(),this.timer=new egret.Timer(1e3,5),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start()},this)},t.prototype.calcDuration=function(e){return 5*e},t.prototype.lightAni=function(){egret.Tween.removeTweens(this.warpCir),egret.Tween.get(this.warpCir,{loop:!0}).set({source:"deng1_png"}).wait(100*this.beishu).set({source:"deng2_png"}).wait(100*this.beishu)},t.prototype.GuangTurn=function(){egret.Tween.get(this.guang,{loop:!0}).to({rotation:360},1800)},t}(BasePanel);__reflect(TurntablePanel.prototype,"TurntablePanel");